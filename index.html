<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F√≠sica Interactiva 3D</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.150.0/build/three.module.js"
        }
    }
    </script>
</head>
<body class="bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 min-h-screen">
    <div id="app">
        <!-- Header -->
        <header class="bg-black bg-opacity-50 text-white p-6 backdrop-blur-sm">
            <h1 class="text-4xl font-bold text-center mb-2">üî¨ F√≠sica Interactiva 3D</h1>
            <p class="text-center text-gray-300">Visualiza y comprende los fen√≥menos f√≠sicos</p>
        </header>

        <!-- Navigation Tabs -->
        <div class="bg-black bg-opacity-30 backdrop-blur-sm">
            <div class="container mx-auto px-4">
                <div class="flex flex-wrap gap-2 py-4">
                    <button @click="modulo = 'cinematica'"
                            :class="modulo === 'cinematica' ? 'bg-blue-600' : 'bg-gray-700 hover:bg-gray-600'"
                            class="px-6 py-3 rounded-lg text-white font-semibold transition-all">
                        üéØ Cinem√°tica
                    </button>
                    <button @click="modulo = 'dinamica'"
                            :class="modulo === 'dinamica' ? 'bg-blue-600' : 'bg-gray-700 hover:bg-gray-600'"
                            class="px-6 py-3 rounded-lg text-white font-semibold transition-all">
                        ‚öôÔ∏è Din√°mica
                    </button>
                    <button @click="modulo = 'optica'"
                            :class="modulo === 'optica' ? 'bg-blue-600' : 'bg-gray-700 hover:bg-gray-600'"
                            class="px-6 py-3 rounded-lg text-white font-semibold transition-all">
                        üî¨ √ìptica
                    </button>
                    <button @click="modulo = 'electromagnetismo'"
                            :class="modulo === 'electromagnetismo' ? 'bg-blue-600' : 'bg-gray-700 hover:bg-gray-600'"
                            class="px-6 py-3 rounded-lg text-white font-semibold transition-all">
                        üß≤ Electromagnetismo
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="container mx-auto px-4 py-8">
            <!-- M√≥dulo de Cinem√°tica -->
            <div v-show="modulo === 'cinematica'" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Panel de Control -->
                <div class="bg-white bg-opacity-10 backdrop-blur-md rounded-xl p-6 text-white">
                    <h2 class="text-2xl font-bold mb-4">üéØ Lanzamiento de Proyectiles</h2>
                    <p class="text-gray-300 mb-6">Ajusta los par√°metros y observa la trayectoria.</p>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block mb-2 font-semibold">√Ångulo: <span class="text-yellow-300">{{ang}}¬∞</span></label>
                            <input type="range" v-model.number="ang" min="5" max="85" 
                                   class="w-full h-2 bg-gray-700 rounded-lg cursor-pointer">
                        </div>
                        
                        <div>
                            <label class="block mb-2 font-semibold">Velocidad: <span class="text-yellow-300">{{vel}} m/s</span></label>
                            <input type="range" v-model.number="vel" min="10" max="50" 
                                   class="w-full h-2 bg-gray-700 rounded-lg cursor-pointer">
                        </div>

                        <div>
                            <label class="block mb-2 font-semibold">Gravedad: <span class="text-yellow-300">{{g}} m/s¬≤</span></label>
                            <input type="range" v-model.number="g" min="1" max="15" step="0.5"
                                   class="w-full h-2 bg-gray-700 rounded-lg cursor-pointer">
                        </div>

                        <button @click="disparar" 
                                :disabled="volando"
                                class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 disabled:opacity-50 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            üöÄ Lanzar
                        </button>

                        <button @click="limpiar" 
                                class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-all">
                            üîÑ Limpiar
                        </button>
                    </div>

                    <!-- Resultados -->
                    <div v-if="datos" class="mt-6 bg-black bg-opacity-30 rounded-lg p-4">
                        <h3 class="font-bold text-lg mb-3">üìä Resultados:</h3>
                        <div class="text-sm space-y-1">
                            <p><span class="text-blue-300">Alcance:</span> {{datos.r}} m</p>
                            <p><span class="text-green-300">Altura m√°x:</span> {{datos.h}} m</p>
                            <p><span class="text-yellow-300">Tiempo:</span> {{datos.t}} s</p>
                            <p><span class="text-purple-300">Vx:</span> {{datos.vx}} m/s</p>
                            <p><span class="text-pink-300">Vy:</span> {{datos.vy}} m/s</p>
                        </div>
                    </div>
                </div>

                <!-- Canvas -->
                <div class="lg:col-span-2 bg-white bg-opacity-10 backdrop-blur-md rounded-xl p-4">
                    <canvas id="micanvas" width="800" height="600" class="w-full rounded-lg bg-gray-900"></canvas>
                    <div class="mt-4 text-white text-sm bg-black bg-opacity-50 rounded-lg p-3">
                        <p class="mb-1">üé® <strong>Visualizaci√≥n Canvas 2D:</strong></p>
                        <ul class="list-disc list-inside space-y-1 text-gray-300">
                            <li><span class="text-yellow-400">Amarillo:</span> Trayectoria parab√≥lica</li>
                            <li><span class="text-red-400">Rojo:</span> Proyectil</li>
                            <li><span class="text-blue-400">Azul:</span> Vector horizontal (Vx)</li>
                            <li><span class="text-green-400">Verde:</span> Vector vertical (Vy)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- M√≥dulo de Din√°mica -->
            <div v-show="modulo === 'dinamica'" class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Panel de Control -->
                <div class="bg-white bg-opacity-10 backdrop-blur-md rounded-xl p-6 text-white">
                    <h2 class="text-2xl font-bold mb-4">‚öôÔ∏è Planos Inclinados</h2>
                    <p class="text-gray-300 mb-6">Ajusta el √°ngulo y observa la descomposici√≥n de fuerzas.</p>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block mb-2 font-semibold">√Ångulo del plano: <span class="text-yellow-300">{{angPlano}}¬∞</span></label>
                            <input type="range" v-model.number="angPlano" min="0" max="60" 
                                   class="w-full h-2 bg-gray-700 rounded-lg cursor-pointer"
                                   @input="actualizarPlano">
                        </div>
                        
                        <div>
                            <label class="block mb-2 font-semibold">Masa del bloque: <span class="text-yellow-300">{{masa}} kg</span></label>
                            <input type="range" v-model.number="masa" min="1" max="20" 
                                   class="w-full h-2 bg-gray-700 rounded-lg cursor-pointer"
                                   @input="actualizarPlano">
                        </div>

                        <div>
                            <label class="block mb-2 font-semibold">Gravedad: <span class="text-yellow-300">{{gPlano}} m/s¬≤</span></label>
                            <input type="range" v-model.number="gPlano" min="5" max="15" step="0.5"
                                   class="w-full h-2 bg-gray-700 rounded-lg cursor-pointer"
                                   @input="actualizarPlano">
                        </div>

                        <button @click="toggleVectores" 
                                class="w-full bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            {{mostrarVectores ? 'üëÅÔ∏è Ocultar' : 'üëÅÔ∏è Mostrar'}} Vectores
                        </button>

                        <button @click="resetearPlano" 
                                class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-all">
                            üîÑ Resetear
                        </button>
                    </div>

                    <!-- Resultados -->
                    <div class="mt-6 bg-black bg-opacity-30 rounded-lg p-4">
                        <h3 class="font-bold text-lg mb-3">üìä Fuerzas:</h3>
                        <div class="text-sm space-y-1">
                            <p><span class="text-yellow-300">Peso (P):</span> {{datosDinamica.peso}} N</p>
                            <p><span class="text-red-300">Px (paralela):</span> {{datosDinamica.px}} N</p>
                            <p><span class="text-green-300">Py (perpendicular):</span> {{datosDinamica.py}} N</p>
                            <p><span class="text-blue-300">Normal (N):</span> {{datosDinamica.normal}} N</p>
                            <p class="text-gray-400 text-xs mt-2">N = Py (equilibrio vertical)</p>
                        </div>
                    </div>
                </div>

                <!-- Canvas -->
                <div class="lg:col-span-2 bg-white bg-opacity-10 backdrop-blur-md rounded-xl p-4">
                    <canvas id="canvasDinamica" width="800" height="600" class="w-full rounded-lg bg-gray-900"></canvas>
                    <div class="mt-4 text-white text-sm bg-black bg-opacity-50 rounded-lg p-3">
                        <p class="mb-1">üé® <strong>Visualizaci√≥n de fuerzas:</strong></p>
                        <ul class="list-disc list-inside space-y-1 text-gray-300">
                            <li><span class="text-yellow-400">Amarillo:</span> Peso total (P = m¬∑g)</li>
                            <li><span class="text-red-400">Rojo:</span> Componente paralela (Px = P¬∑sen(Œ∏))</li>
                            <li><span class="text-green-400">Verde:</span> Componente perpendicular (Py = P¬∑cos(Œ∏))</li>
                            <li><span class="text-blue-400">Azul:</span> Fuerza Normal (N = Py)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Otros M√≥dulos -->
            <div v-show="modulo !== 'cinematica' && modulo !== 'dinamica'" class="bg-white bg-opacity-10 backdrop-blur-md rounded-xl p-8 text-white text-center">
                <h2 class="text-3xl font-bold mb-4">
                    <span v-if="modulo === 'optica'">üî¨ Lentes y Espejos</span>
                    <span v-if="modulo === 'electromagnetismo'">üß≤ Regla de la Mano Derecha</span>
                </h2>
                <div class="flex items-center justify-center h-96">
                    <div>
                        <div class="text-8xl mb-4">üöß</div>
                        <p class="text-xl text-gray-300 mb-4">M√≥dulo en desarrollo</p>
                        <p class="text-gray-400">Pr√≥ximamente disponible</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    modulo: 'cinematica',
                    ang: 45,
                    vel: 30,
                    g: 9.8,
                    datos: null,
                    volando: false,
                    canvas: null,
                    ctx: null,
                    escala: 10,
                    offsetX: 50,
                    offsetY: 500,
                    // Din√°mica
                    angPlano: 30,
                    masa: 10,
                    gPlano: 9.8,
                    mostrarVectores: true,
                    canvasDinamica: null,
                    ctxDinamica: null,
                    datosDinamica: {
                        peso: '0',
                        px: '0',
                        py: '0',
                        normal: '0'
                    }
                };
            },
            mounted() {
                this.canvas = document.getElementById('micanvas');
                this.ctx = this.canvas.getContext('2d');
                this.dibujarEscena();
                
                this.canvasDinamica = document.getElementById('canvasDinamica');
                this.ctxDinamica = this.canvasDinamica.getContext('2d');
                this.actualizarPlano();
            },
            methods: {
                dibujarEscena() {
                    const c = this.ctx;
                    const w = this.canvas.width;
                    const h = this.canvas.height;
                    
                    // Fondo
                    c.fillStyle = '#0a0a1a';
                    c.fillRect(0, 0, w, h);
                    
                    // Cuadr√≠cula
                    c.strokeStyle = '#333366';
                    c.lineWidth = 1;
                    for (let x = 0; x < w; x += 40) {
                        c.beginPath();
                        c.moveTo(x, 0);
                        c.lineTo(x, h);
                        c.stroke();
                    }
                    for (let y = 0; y < h; y += 40) {
                        c.beginPath();
                        c.moveTo(0, y);
                        c.lineTo(w, y);
                        c.stroke();
                    }
                    
                    // Suelo
                    c.fillStyle = '#2a4858';
                    c.fillRect(0, this.offsetY, w, h - this.offsetY);
                    
                    // L√≠nea del suelo
                    c.strokeStyle = '#00aaff';
                    c.lineWidth = 3;
                    c.beginPath();
                    c.moveTo(0, this.offsetY);
                    c.lineTo(w, this.offsetY);
                    c.stroke();
                    
                    // Ca√±√≥n
                    c.fillStyle = '#555555';
                    c.fillRect(this.offsetX - 15, this.offsetY - 10, 30, 10);
                    c.beginPath();
                    c.arc(this.offsetX, this.offsetY - 5, 8, 0, Math.PI * 2);
                    c.fill();
                },
                
                disparar() {
                    if (this.volando) return;
                    
                    const rad = this.ang * Math.PI / 180;
                    const vx = this.vel * Math.cos(rad);
                    const vy = this.vel * Math.sin(rad);
                    const tTotal = (2 * vy) / this.g;
                    const alcance = vx * tTotal;
                    const hMax = (vy * vy) / (2 * this.g);
                    
                    this.datos = {
                        vx: vx.toFixed(1),
                        vy: vy.toFixed(1),
                        r: alcance.toFixed(1),
                        h: hMax.toFixed(1),
                        t: tTotal.toFixed(2)
                    };
                    
                    this.dibujarEscena();
                    this.dibujarTrayectoria(vx, vy, tTotal);
                    this.animarProyectil(vx, vy, tTotal);
                },
                
                dibujarTrayectoria(vx, vy, tTotal) {
                    const c = this.ctx;
                    c.strokeStyle = '#ffff00';
                    c.lineWidth = 2;
                    c.beginPath();
                    
                    let primero = true;
                    for (let t = 0; t <= tTotal; t += 0.05) {
                        const x = this.offsetX + vx * t * this.escala;
                        const yPos = vy * t - 0.5 * this.g * t * t;
                        const y = this.offsetY - yPos * this.escala;
                        
                        if (primero) {
                            c.moveTo(x, y);
                            primero = false;
                        } else {
                            c.lineTo(x, y);
                        }
                    }
                    c.stroke();
                },
                
                animarProyectil(vx, vy, tTotal) {
                    this.volando = true;
                    let t = 0;
                    const dt = 0.03;
                    
                    const frame = () => {
                        if (t > tTotal) {
                            this.volando = false;
                            return;
                        }
                        
                        const xPos = vx * t;
                        const yPos = vy * t - 0.5 * this.g * t * t;
                        
                        if (yPos >= 0) {
                            this.dibujarEscena();
                            this.dibujarTrayectoria(vx, vy, tTotal);
                            
                            const px = this.offsetX + xPos * this.escala;
                            const py = this.offsetY - yPos * this.escala;
                            
                            // Proyectil
                            this.ctx.fillStyle = '#ff3333';
                            this.ctx.beginPath();
                            this.ctx.arc(px, py, 8, 0, Math.PI * 2);
                            this.ctx.fill();
                            
                            // Vectores
                            const vyActual = vy - this.g * t;
                            const escVec = 3;
                            
                            // Vector Vx (azul)
                            this.dibujarFlecha(px, py, px + vx * escVec, py, '#0088ff');
                            
                            // Vector Vy (verde)
                            this.dibujarFlecha(px, py, px, py - vyActual * escVec, '#00ff00');
                            
                            // Vector total (rojo)
                            this.dibujarFlecha(px, py, px + vx * escVec, py - vyActual * escVec, '#ff0000');
                            
                            t += dt;
                            requestAnimationFrame(frame);
                        } else {
                            this.volando = false;
                        }
                    };
                    
                    frame();
                },
                
                dibujarFlecha(x1, y1, x2, y2, color) {
                    const c = this.ctx;
                    c.strokeStyle = color;
                    c.fillStyle = color;
                    c.lineWidth = 2;
                    
                    // L√≠nea
                    c.beginPath();
                    c.moveTo(x1, y1);
                    c.lineTo(x2, y2);
                    c.stroke();
                    
                    // Punta
                    const ang = Math.atan2(y2 - y1, x2 - x1);
                    const largo = 10;
                    c.beginPath();
                    c.moveTo(x2, y2);
                    c.lineTo(x2 - largo * Math.cos(ang - Math.PI / 6), y2 - largo * Math.sin(ang - Math.PI / 6));
                    c.lineTo(x2 - largo * Math.cos(ang + Math.PI / 6), y2 - largo * Math.sin(ang + Math.PI / 6));
                    c.closePath();
                    c.fill();
                },
                
                limpiar() {
                    this.volando = false;
                    this.datos = null;
                    this.dibujarEscena();
                },
                
                // M√âTODOS DE DIN√ÅMICA
                actualizarPlano() {
                    const c = this.ctxDinamica;
                    const w = this.canvasDinamica.width;
                    const h = this.canvasDinamica.height;
                    
                    // Calcular fuerzas
                    const rad = this.angPlano * Math.PI / 180;
                    const peso = this.masa * this.gPlano;
                    const px = peso * Math.sin(rad);
                    const py = peso * Math.cos(rad);
                    
                    this.datosDinamica = {
                        peso: peso.toFixed(1),
                        px: px.toFixed(1),
                        py: py.toFixed(1),
                        normal: py.toFixed(1)
                    };
                    
                    // Limpiar canvas
                    c.fillStyle = '#0a0a1a';
                    c.fillRect(0, 0, w, h);
                    
                    // Cuadr√≠cula
                    c.strokeStyle = '#333366';
                    c.lineWidth = 1;
                    for (let x = 0; x < w; x += 40) {
                        c.beginPath();
                        c.moveTo(x, 0);
                        c.lineTo(x, h);
                        c.stroke();
                    }
                    for (let y = 0; y < h; y += 40) {
                        c.beginPath();
                        c.moveTo(0, y);
                        c.lineTo(w, y);
                        c.stroke();
                    }
                    
                    // Dibujar plano inclinado
                    const baseX = 150;
                    const baseY = 450;
                    const largo = 400;
                    const finalX = baseX + largo * Math.cos(rad);
                    const finalY = baseY - largo * Math.sin(rad);
                    
                    // Plano
                    c.fillStyle = '#3a5a6a';
                    c.beginPath();
                    c.moveTo(baseX, baseY);
                    c.lineTo(finalX, finalY);
                    c.lineTo(finalX, baseY);
                    c.closePath();
                    c.fill();
                    
                    c.strokeStyle = '#00aaff';
                    c.lineWidth = 4;
                    c.beginPath();
                    c.moveTo(baseX, baseY);
                    c.lineTo(finalX, finalY);
                    c.stroke();
                    
                    // Suelo
                    c.fillStyle = '#2a4858';
                    c.fillRect(0, baseY, w, h - baseY);
                    c.strokeStyle = '#00aaff';
                    c.lineWidth = 3;
                    c.beginPath();
                    c.moveTo(0, baseY);
                    c.lineTo(w, baseY);
                    c.stroke();
                    
                    // Bloque
                    const tamBloque = 40;
                    const bloqueX = baseX + 100;
                    const bloqueY = baseY - 100 * Math.tan(rad) - tamBloque / 2;
                    
                    c.save();
                    c.translate(bloqueX, bloqueY);
                    c.rotate(-rad);
                    
                    c.fillStyle = '#ff6b6b';
                    c.strokeStyle = '#ffffff';
                    c.lineWidth = 2;
                    c.fillRect(-tamBloque/2, -tamBloque/2, tamBloque, tamBloque);
                    c.strokeRect(-tamBloque/2, -tamBloque/2, tamBloque, tamBloque);
                    
                    // Etiqueta masa
                    c.rotate(rad);
                    c.fillStyle = '#ffffff';
                    c.font = 'bold 14px Arial';
                    c.textAlign = 'center';
                    c.fillText(this.masa + ' kg', 0, 5);
                    
                    c.restore();
                    
                    // Dibujar vectores si est√°n activados
                    if (this.mostrarVectores) {
                        const escalaVector = 2.5;
                        const centroX = bloqueX;
                        const centroY = bloqueY;
                        
                        // Vector Peso (amarillo) - siempre hacia abajo
                        this.dibujarFlechaDinamica(
                            centroX, centroY,
                            centroX, centroY + peso * escalaVector,
                            '#ffff00', 'P'
                        );
                        
                        // Vector Px (rojo) - paralelo al plano hacia abajo
                        const pxEndX = centroX + px * escalaVector * Math.cos(rad);
                        const pxEndY = centroY + px * escalaVector * Math.sin(rad);
                        this.dibujarFlechaDinamica(
                            centroX, centroY,
                            pxEndX, pxEndY,
                            '#ff3333', 'Px'
                        );
                        
                        // Vector Py (verde) - perpendicular al plano
                        const pyEndX = centroX - py * escalaVector * Math.sin(rad);
                        const pyEndY = centroY + py * escalaVector * Math.cos(rad);
                        this.dibujarFlechaDinamica(
                            centroX, centroY,
                            pyEndX, pyEndY,
                            '#33ff33', 'Py'
                        );
                        
                        // Vector Normal (azul) - opuesto a Py
                        const nEndX = centroX + py * escalaVector * Math.sin(rad);
                        const nEndY = centroY - py * escalaVector * Math.cos(rad);
                        this.dibujarFlechaDinamica(
                            centroX, centroY,
                            nEndX, nEndY,
                            '#3333ff', 'N'
                        );
                    }
                    
                    // Mostrar √°ngulo
                    c.strokeStyle = '#ffffff';
                    c.lineWidth = 2;
                    c.beginPath();
                    c.arc(baseX, baseY, 50, 0, -rad, true);
                    c.stroke();
                    
                    c.fillStyle = '#ffffff';
                    c.font = 'bold 16px Arial';
                    c.fillText('Œ∏ = ' + this.angPlano + '¬∞', baseX + 60, baseY - 10);
                },
                
                dibujarFlechaDinamica(x1, y1, x2, y2, color, etiqueta) {
                    const c = this.ctxDinamica;
                    c.strokeStyle = color;
                    c.fillStyle = color;
                    c.lineWidth = 3;
                    
                    // L√≠nea
                    c.beginPath();
                    c.moveTo(x1, y1);
                    c.lineTo(x2, y2);
                    c.stroke();
                    
                    // Punta
                    const ang = Math.atan2(y2 - y1, x2 - x1);
                    const largo = 12;
                    c.beginPath();
                    c.moveTo(x2, y2);
                    c.lineTo(x2 - largo * Math.cos(ang - Math.PI / 6), y2 - largo * Math.sin(ang - Math.PI / 6));
                    c.lineTo(x2 - largo * Math.cos(ang + Math.PI / 6), y2 - largo * Math.sin(ang + Math.PI / 6));
                    c.closePath();
                    c.fill();
                    
                    // Etiqueta
                    c.fillStyle = color;
                    c.font = 'bold 14px Arial';
                    c.textAlign = 'center';
                    const labelX = (x1 + x2) / 2 + 15;
                    const labelY = (y1 + y2) / 2 - 5;
                    c.fillText(etiqueta, labelX, labelY);
                },
                
                toggleVectores() {
                    this.mostrarVectores = !this.mostrarVectores;
                    this.actualizarPlano();
                },
                
                resetearPlano() {
                    this.angPlano = 30;
                    this.masa = 10;
                    this.gPlano = 9.8;
                    this.mostrarVectores = true;
                    this.actualizarPlano();
                }
            }
        }).mount('#app');
    </script>
</body>
</html>